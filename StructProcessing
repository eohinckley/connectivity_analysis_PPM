# Source the set up HCP pipeline script by opening a terminal in the scripts folder:
source ./SetUpHCPPipeline.sh

# Running freesurfer scripts
./PreFreeSurferPipeline.sh --path=/Users/SEAlab/Desktop --subject=1196_PP3 --t1=/Users/SEAlab/Desktop/1196_PP3/NIFTI/T1W_MPRAGE.nii --t2=/Users/SEAlab/Desktop/1196_PP3/NIFTI/T2W_TSE.nii --t1template=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/MNI152_T1_1mm.nii.gz --t1templatebrain=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/MNI152_T1_1mm_brain.nii.gz --t1template2mm=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/MNI152_T1_2mm.nii.gz --t2template=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/MNI152_T2_1mm.nii.gz --t2templatebrain=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/MNI152_T2_1mm_brain.nii.gz --templatemask=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/MNI152_T1_1mm_brain_mask.nii.gz --template2mmmask=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/MNI152_T1_2mm_brain_mask_dil.nii.gz --brainsize=150 /Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/config/T1_2_MNI152_2mm.cnf --echodiff=NONE --SEPhaseNeg=NONE --SEPhasePos=NONE --seechospacing=NONE --seunwarpdir=NONE --gdcoeffs=NONE

./FreeSurferPipeline.sh --subject=1196_PP3 --t1w-image=/Users/SEAlab/Desktop/1196_PP3/T1w/T1w_acpc_dc_restore.nii.gz --t1w-brain=/Users/SEAlab/Desktop/1196_PP3/T1w/T1w_acpc_dc_restore_brain.nii.gz --t2=/Users/SEAlab/Desktop/1196_PP3/T1w/T2w_acpc_dc_restore.nii.gz --no-conf2hires --subject-dir=/Users/SEAlab/Desktop/1196_PP3/T1w

./PostFreeSurferPipeline.sh --path=/Users/SEAlab/Desktop --subject=1196_PP3 --surfatlasdir=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/standard_mesh_atlases --grayordinatesdir=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/91282_Greyordinates --grayordinatesres=2 --hiresmesh=164 --lowresmesh=32 --subcortgraylabels=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/config/FreeSurferSubcorticalLabelTableLut.txt --freesurferlabels=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/config/FreeSurferAllLut.txt --refmyelinmaps=/Users/SEAlab/Desktop/HCP_pipeline/HCPpipelines-4.2.0/global/templates/standard_mesh_atlases/Conte69.MyelinMap_BC.164k_fs_LR.dscalar.nii

# Running ciftify command when there is only T1W and no T2W
ciftify_recon_all --ciftify-work-dir /Users/SEAlab/Desktop/1196_Preg2 --fs-subjects-dir /Applications/freesurfer/subjects --resample-to-T1w32k <1196_Preg2>

#Recon all
recon-all -s 1196_PP2 -i /Users/SEAlab/Desktop/1196_PP2/T1w/T1w.nii.gz -sd /Users/SEAlab/Desktop/1196_PP2/T1w -all

./FreeSurferPipeline.sh --subject=1196_PP2 --existing-subject --no-conf2hires --subject-dir=/Users/SEAlab/Desktop/1196_PP2/T1w --extra-reconall-arg=-show-edits
